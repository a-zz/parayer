<mat-tab-group id="project-tabs-cntnr" (selectedTabChange)="loadTabContent($event.index)">
	<mat-tab label="GENERAL">
		[TODO General]
	</mat-tab>
	<mat-tab label="NOTES">
		[TODO Notes]
	</mat-tab>
	<mat-tab label="TASKS">
		[TODO Tasks]
	</mat-tab>
	<mat-tab label="FILES">
		[TODO Files]
	</mat-tab>
	<mat-tab label="APPOINTMENTS">
		[TODO Appointments]
	</mat-tab>
	<mat-tab label="HISTORY">
		<div class="tab-content" *ngIf="project!=null">
			<div class="tab-content-control-cntnr">
				<div class="tab-content-control-cntnr-left">
					Found {{project!.history.length}} history entries
					<span *ngIf="historyFilteredOutEntries!=0">&nbsp;({{historyFilteredOutEntries}} filtered out)</span>
				</div>
				<div class="tab-content-control-cntnr-right">
					<mat-icon>search</mat-icon>&nbsp;
					<mat-form-field>
    					<input matInput placeholder="text" title="Text filter for project history" aria-label="Text filter for project history" 
    						[value]="historyTextFilter" (input)="setHistoryTextFilter($event)" (keyup)="filterHistory()">
    					<button mat-button *ngIf="historyTextFilter" matSuffix mat-icon-button aria-label="Clear filter" 
    						(click)="historyTextFilter=''; filterHistory()">
    						<mat-icon>close</mat-icon>
						  </button>
    				</mat-form-field>&nbsp;
    				<mat-form-field>
						 <mat-select title="Date filter for project history" aria-label="Date filter for project history" 
						 	[(value)]="historyDateFilter" (selectionChange)="filterHistory()">
    						<mat-option *ngFor="let df of historyDateFilterOptions" [value]="df.value">
      							{{df.text}}
    						</mat-option>
  						</mat-select>
					</mat-form-field>
				</div>
			</div>
			<div class="card-list-cntnr">
				<mat-card class="hist-entry" *ngFor="let h of project!.history"  id="project-hist-entry-{{h._id}}">
					<mat-card-content>
						<mat-chip-list>
							<mat-chip class="refchip" id="{{h.usr}}">...</mat-chip>&nbsp;
							{{h.summary}}&nbsp;
							<mat-chip class="refchip"*ngFor="let r of h.relatedTo" id="{{r}}">...</mat-chip>&nbsp;
							({{h.timestamp.toLocaleString()}})
						</mat-chip-list>
					</mat-card-content>
				</mat-card>
			</div>
		</div>
	</mat-tab>
</mat-tab-group>

